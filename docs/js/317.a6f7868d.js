"use strict";(globalThis["webpackChunkvrolijkverslag"]=globalThis["webpackChunkvrolijkverslag"]||[]).push([[317],{6317:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var o=l(1758),n=l(8790),i=l(9104);const a={style:{width:"80%","min-width":"1000px",height:"100%",display:"flex","flex-direction":"column"}},r={class:"flex row q-pa-sm q-gutter-x-md"},s={class:"text-h3",style:{"flex-shrink":"0","flex-grow":"0"}},d={style:{"font-size":"0.6em"}},u={style:{"font-size":"0.6em"}},p={autocorrect:"on",autocapitalize:"on",autocomplete:"off",spellcheck:"true",style:{height:"100%"}},c={class:"q-my-md q-px-md q-gutter-x-sm",style:{height:"200px",display:"flex","flex-wrap":"nowrap","white-space":"nowrap","overflow-x":"auto","align-items":"center",gap:"5px","flex-grow":"0","flex-shrink":"0"}},g={style:{width:"200px",height:"200px",border:"1px solid lightgray",display:"flex","flex-grow":"0","flex-shrink":"0","justify-content":"center","align-items":"center"}},h=["onChange","id"],m=["src"];function f(e,t,l,f,y,x){const v=(0,o.g2)("q-btn"),k=(0,o.g2)("q-input"),w=(0,o.g2)("q-popup-edit"),b=(0,o.g2)("q-space"),q=(0,o.g2)("q-carousel-slide"),C=(0,o.g2)("q-carousel"),F=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(F,{padding:"",style:{display:"flex","justify-content":"center",width:"100%"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",a,[(0,o.Lk)("div",r,[(0,o.bF)(v,{to:"/",icon:"home",rounded:""}),(0,o.Lk)("div",s,[(0,o.Lk)("span",d,"Week "+(0,n.v_)(e.getISOWeek(e.report.startDate)),1),(0,o.eW)(" - "+(0,n.v_)(e.report.theme)+" - ",1),(0,o.Lk)("span",u,(0,n.v_)(e.getWeekDay(e.slide)),1),(0,o.bF)(w,{modelValue:e.report.theme,"onUpdate:modelValue":t[0]||(t[0]=t=>e.report.theme=t),buttons:""},{default:(0,o.k6)((e=>[(0,o.bF)(k,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:"",onKeyup:(0,i.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue"])]),(0,o.bF)(b),(0,o.bF)(v,{icon:"print",to:{name:"ExportPage",query:{reportId:e.report.id}}},null,8,["to"])]),(0,o.bF)(C,{modelValue:e.slide,"onUpdate:modelValue":t[1]||(t[1]=t=>e.slide=t),"transition-prev":"slide-right","transition-next":"slide-left","control-color":"primary",class:"rounded-borders",arrows:"",style:{width:"100%",height:"100%"}},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.values(e.report.dayReports),((t,l)=>((0,o.uX)(),(0,o.Wv)(q,{key:l,name:l,style:{width:"100%",height:"100%",display:"flex","flex-direction":"column"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",p,[(0,o.bF)(k,{modelValue:t.description,"onUpdate:modelValue":e=>t.description=e,type:"textarea",debounce:"300",style:{height:"100%","font-size":"14pt","font-family":"Tahoma, sans-serif","line-height":"1.2"},class:"q-mx-xl","input-style":"height: 100%",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("div",c,[(0,o.Lk)("div",g,[(0,o.Lk)("input",{type:"file",multiple:"",onChange:t=>e.handleFileUpload(l,t),style:{display:"none"},id:`fileInput${l}`,accept:"image/*"},null,40,h),(0,o.bF)(v,{label:"Afbeelding toevoegen",size:"sm",icon:"add",onClick:t=>e.openFileInput(l),disable:t.images.length>=10},null,8,["onClick","disable"])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.images,((l,n)=>((0,o.uX)(),(0,o.CE)("div",{key:l,style:{width:"200px",height:"200px","flex-grow":"0","flex-shrink":"0",border:"1px solid lightgray",display:"inline-block",position:"relative","box-sizing":"border-box"},class:"q-pa-sm"},[(0,o.bF)(v,{icon:"delete",size:"sm",style:{position:"absolute",top:"3px",right:"3px"},flat:"",round:"",onClick:l=>e.removeImage(t,n)},null,8,["onClick"]),(0,o.Lk)("img",{src:l,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,m)])))),128))])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])),_:1})}var y=l(5182),x=l(8734),v=l(455),k=l(4253),w=function(e,t,l,o){function n(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function r(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?l(e.value):n(e.value).then(a,r)}s((o=o.apply(e,t||[])).next())}))};const b=(0,o.pM)({name:"VerslagPage",setup(){const e=(0,v.lq)(),t=(0,y.P)(),l=e.query["reportId"],o=t.get(l);if(void 0===o)throw new Error("Report is not found");return{weekReportStore:t,report:o,slide:(0,x.KR)(0),getISOWeek:k.s}},methods:{getWeekDay(e){const t=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"];return t[e]},openFileInput(e){const t=document.querySelector(`#fileInput${e}`);t&&t.click()},removeImage(e,t){e.images.splice(t,1)},onPaste(e,t){var l,o;const n=this.$refs[`editorRef_${t}`][0];if("INPUT"===(null===(l=e.target)||void 0===l?void 0:l.nodeName))return;let i,a;e.preventDefault(),e.stopPropagation(),(null===(o=e.clipboardData)||void 0===o?void 0:o.getData)?(i=e.clipboardData.getData("text/plain"),n&&n.runCmd&&n.runCmd("insertText",i)):"clipboardData"in window&&window.clipboardData.getData&&(a||(a=!0,n&&n.runCmd&&n.runCmd("ms-pasteTextOnly",i)),a=!1)},handleFileUpload(e,t){return w(this,void 0,void 0,(function*(){const l=t.target.files;if(t.target.type="text",t.target.type="file",!l)return void console.log("no files");const o=this.report.dayReports[e];console.log("update",l);for(let e=0;e<l.length&&o.images.length<10;e++){const t=yield C(l[e],1280,720);null===t&&console.log("Failed",e),console.log(o.images.length,o.images.length<10),o.images.push(yield q(t))}}))}}});function q(e){return new Promise((t=>{const l=new FileReader;l.onload=()=>{t(l.result)},l.readAsDataURL(e)}))}function C(e,t,l){return new Promise(((o,n)=>{let i=new Image;i.src=URL.createObjectURL(e),i.onload=()=>{let n,a,r=i.width,s=i.height;if(r<=t&&s<=l)return void o(e);r>s?(a=s*(t/r),n=t):(n=r*(l/s),a=l);let d=document.createElement("canvas");d.width=n,d.height=a;let u=d.getContext("2d");null!==u?(u.drawImage(i,0,0,n,a),d.toBlob(o,e.type)):o(null)},i.onerror=n}))}var F=l(2807),I=l(3177),V=l(8039),D=l(7426),L=l(7868),U=l(1173),A=l(9923),P=l(8264),R=l(1225),j=l(8582),W=l.n(j);const Q=(0,F.A)(b,[["render",f]]),_=Q;W()(b,"components",{QPage:I.A,QBtn:V.A,QPopupEdit:D.A,QInput:L.A,QSpace:U.A,QCarousel:A.A,QCarouselSlide:P.A,QField:R.A})}}]);