"use strict";(globalThis["webpackChunkvrolijkverslag"]=globalThis["webpackChunkvrolijkverslag"]||[]).push([[820],{820:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var o=n(1758),i=n(8790),l=n(9104);const a=(0,o.Lk)("iframe",null,null,-1),s={style:{width:"80%","min-width":"1000px",height:"100%",display:"flex","flex-direction":"column"}},r={class:"flex row q-pa-sm q-gutter-x-md"},d={class:"text-h3",style:{"flex-shrink":"0","flex-grow":"0"}},c={style:{"font-size":"0.6em"}},p={style:{"font-size":"0.6em"}},u={autocorrect:"on",autocapitalize:"on",autocomplete:"off",spellcheck:"true",style:{height:"100%"}},m={class:"q-my-md q-px-md q-gutter-x-sm",style:{height:"200px",display:"flex","flex-wrap":"nowrap","white-space":"nowrap","overflow-x":"auto","align-items":"center",gap:"5px","flex-grow":"0","flex-shrink":"0"}},h={style:{width:"200px",height:"200px",border:"1px solid lightgray",display:"flex","flex-grow":"0","flex-shrink":"0","justify-content":"center","align-items":"center"}},g=["onChange","id"],f=["src"];function y(e,t,n,y,x,b){const v=(0,o.g2)("q-btn"),k=(0,o.g2)("q-input"),w=(0,o.g2)("q-popup-edit"),_=(0,o.g2)("q-space"),A=(0,o.g2)("q-carousel-slide"),E=(0,o.g2)("q-carousel"),j=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(j,{padding:"",style:{display:"flex","justify-content":"center",width:"100%"}},{default:(0,o.k6)((()=>[a,(0,o.Lk)("div",s,[(0,o.Lk)("div",r,[(0,o.bF)(v,{to:"/",icon:"home",rounded:""}),(0,o.Lk)("div",d,[(0,o.Lk)("span",c,"Week "+(0,i.v_)(e.getISOWeek(e.report.startDate)),1),(0,o.eW)(" - "+(0,i.v_)(e.report.theme)+" - ",1),(0,o.Lk)("span",p,(0,i.v_)(e.getWeekDay(e.slide)),1),(0,o.bF)(w,{modelValue:e.report.theme,"onUpdate:modelValue":t[0]||(t[0]=t=>e.report.theme=t),buttons:""},{default:(0,o.k6)((e=>[(0,o.bF)(k,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:"",onKeyup:(0,l.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue"])]),(0,o.bF)(_),(0,o.bF)(v,{icon:"print",onClick:e.doExport},null,8,["onClick"])]),(0,o.bF)(E,{modelValue:e.slide,"onUpdate:modelValue":t[1]||(t[1]=t=>e.slide=t),"transition-prev":"slide-right","transition-next":"slide-left","control-color":"primary",class:"rounded-borders",arrows:"",style:{width:"100%",height:"100%"}},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.values(e.report.dayReports),((t,n)=>((0,o.uX)(),(0,o.Wv)(A,{key:n,name:n,style:{width:"100%",height:"100%",display:"flex","flex-direction":"column"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",u,[(0,o.bF)(k,{modelValue:t.description,"onUpdate:modelValue":e=>t.description=e,type:"textarea",debounce:"300",style:{height:"100%","font-size":"14pt","font-family":"Tahoma, sans-serif","line-height":"1.2"},class:"q-mx-xl","input-style":"height: 100%",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("div",m,[(0,o.Lk)("div",h,[(0,o.Lk)("input",{type:"file",multiple:"",onChange:t=>e.handleFileUpload(n,t),style:{display:"none"},id:`fileInput${n}`,accept:"image/*"},null,40,g),(0,o.bF)(v,{label:"Afbeelding toevoegen",size:"sm",icon:"add",onClick:t=>e.openFileInput(n),disable:t.images.length>=10},null,8,["onClick","disable"])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.images,((n,i)=>((0,o.uX)(),(0,o.CE)("div",{key:n,style:{width:"200px",height:"200px","flex-grow":"0","flex-shrink":"0",border:"1px solid lightgray",display:"inline-block",position:"relative","box-sizing":"border-box"},class:"q-pa-sm"},[(0,o.bF)(v,{icon:"delete",size:"sm",style:{position:"absolute",top:"3px",right:"3px"},flat:"",round:"",onClick:n=>e.removeImage(t,i)},null,8,["onClick"]),(0,o.Lk)("img",{src:n,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,f)])))),128))])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])),_:1})}var x=n(5182),b=n(8734),v=n(455),k=n(4253),w=function(e,t,n,o){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function a(e){try{r(o.next(e))}catch(t){l(t)}}function s(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):i(e.value).then(a,s)}r((o=o.apply(e,t||[])).next())}))};const _=(0,o.pM)({name:"VerslagPage",setup(){const e=(0,v.lq)(),t=(0,x.P)(),n=e.query["reportId"],o=t.get(n);if(void 0===o)throw new Error("Report is not found");return{weekReportStore:t,report:o,slide:(0,b.KR)(0),getISOWeek:k.s}},methods:{getWeekDay(e){const t=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"];return t[e]},openFileInput(e){const t=document.querySelector(`#fileInput${e}`);t&&t.click()},removeImage(e,t){e.images.splice(t,1)},doExport(){return w(this,void 0,void 0,(function*(){const e={theme:this.report.theme,weekNumber:(0,k.s)(this.report.startDate)};for(let n=0;n<5;n++)e["text_day_"+n]=this.paragraphs(this.report.dayReports[n].description).map((e=>`<p>${e}</p>`)),e["img_day_"+n]=this.report.dayReports[n].images.map((e=>`<img src="${e}" />`));let t=n(4249).A;Object.keys(e).forEach((n=>{const o=e[n];t=t.replaceAll(`%${n.toUpperCase()}%`,Array.isArray(o)?o.join(""):o.toString())}));var o=new Blob([t],{type:"text/html"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="your-download-name-here.html",i.hidden=!0,document.body.appendChild(i),i.innerHTML="something random - nobody will see this, it doesn't matter what you put here",i.click()}))},paragraphs(e){return e.trim().replace(/\n\s*\n/g,"\n").split("\n")},handleFileUpload(e,t){return w(this,void 0,void 0,(function*(){const n=t.target.files;if(t.target.type="text",t.target.type="file",!n)return void console.log("no files");const o=this.report.dayReports[e];console.log("update",n);for(let e=0;e<n.length&&o.images.length<20;e++){const t=yield E(n[e],1280,720);null===t&&console.log("Failed",e),o.images.push(yield A(t))}}))}}});function A(e){return new Promise((t=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.readAsDataURL(e)}))}function E(e,t,n){return new Promise(((o,i)=>{let l=new Image;l.src=URL.createObjectURL(e),l.onload=()=>{let i,a,s=l.width,r=l.height;if(s<=t&&r<=n)return void o(e);s>r?(a=r*(t/s),i=t):(i=s*(n/r),a=n);let d=document.createElement("canvas");d.width=i,d.height=a;let c=d.getContext("2d");null!==c?(c.drawImage(l,0,0,i,a),d.toBlob(o,e.type)):o(null)},l.onerror=i}))}var j=n(2807),I=n(3177),F=n(8039),L=n(7426),C=n(7868),D=n(1173),T=n(9923),V=n(8264),q=n(1225),R=n(8582),U=n.n(R);const W=(0,j.A)(_,[["render",y]]),M=W;U()(_,"components",{QPage:I.A,QBtn:F.A,QPopupEdit:L.A,QInput:C.A,QSpace:D.A,QCarousel:T.A,QCarouselSlide:V.A,QField:q.A})},4249:(e,t,n)=>{n.d(t,{A:()=>o});const o='<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      @page {\n        size: 210mm 297mm;\n        margin: 16mm;\n      }\n\n      body {\n        font-family: Tahoma, sans-serif;\n        font-size: 18pt;\n      }\n\n      .day-title:not(:nth-of-type(1)) {\n        page-break-before: always;\n      }\n\n      .text-box {\n        margin-bottom: 18px;\n      }\n\n      img {\n        height: 13cm;\n        margin-top: 2mm;\n        margin-bottom: 2mm;\n        object-fit: contain;\n      }\n\n      p,\n      img {\n        page-break-inside: avoid;\n        break-inside: avoid;\n      }\n\n      .img-box {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n      }\n    </style>\n    <title>Week %WEEKNUMBER% - %THEME%</title>\n    \x3c!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script> --\x3e\n    \x3c!-- <script src="https://raw.githubusercontent.com/davidnbooth/html3pdf.js/merge_PRs/src/index.js"><\/script> --\x3e\n    <script type="module">\n      import html2pdf from \'https://raw.githubusercontent.com/davidnbooth/html3pdf.js/merge_PRs/src/index.js\';\n      addEventListener(\'load\', (event) => {\n        alert(\'OK\');\n        html2pdf(document.body);\n      });\n    <\/script>\n    <script><\/script>\n  </head>\n  <body>\n    <h2>Week %WEEKNUMBER% - %THEME%</h2>\n\n    <div style="height: 10px"></div>\n\n    <h3 class="day-title">Maandag</h3>\n    <div class="text-box">%TEXT_DAY_0%</div>\n    <div class="img-box">%IMG_DAY_0%</div>\n\n    <h3 class="day-title">Dinsdag</h3>\n    <div class="text-box">%TEXT_DAY_1%</div>\n    <div class="img-box">%IMG_DAY_1%</div>\n\n    <h3 class="day-title">Woensdag</h3>\n    <div class="text-box">%TEXT_DAY_2%</div>\n    <div class="img-box">%IMG_DAY_2%</div>\n\n    <h3 class="day-title">Donderdag</h3>\n    <div class="text-box">%TEXT_DAY_3%</div>\n    <div class="img-box">%IMG_DAY_3%</div>\n\n    <h3 class="day-title">Vrijdag</h3>\n    <div class="text-box">%TEXT_DAY_4%</div>\n    <div class="img-box">%IMG_DAY_4%</div>\n  </body>\n</html>\n'}}]);