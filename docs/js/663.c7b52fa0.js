"use strict";(globalThis["webpackChunkvrolijkverslag"]=globalThis["webpackChunkvrolijkverslag"]||[]).push([[663],{2663:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var i=n(1758),o=n(8790),l=n(9104);const a={style:{width:"80%","min-width":"1000px",height:"100%",display:"flex","flex-direction":"column"}},s={class:"flex row q-pa-sm q-gutter-x-md"},r={class:"text-h3",style:{"flex-shrink":"0","flex-grow":"0"}},d={style:{"font-size":"0.6em"}},p={style:{"font-size":"0.6em"}},c={autocorrect:"on",autocapitalize:"on",autocomplete:"off",spellcheck:"true",style:{height:"100%"}},g={class:"q-my-md q-px-md q-gutter-x-sm",style:{height:"200px",display:"flex","flex-wrap":"nowrap","white-space":"nowrap","overflow-x":"auto","align-items":"center",gap:"5px","flex-grow":"0","flex-shrink":"0"}},u={style:{width:"200px",height:"200px",border:"1px solid lightgray",display:"flex","flex-grow":"0","flex-shrink":"0","justify-content":"center","align-items":"center"}},m=["onChange","id"],h=["src"];function y(e,t,n,y,f,x){const v=(0,i.g2)("q-btn"),b=(0,i.g2)("q-input"),k=(0,i.g2)("q-popup-edit"),w=(0,i.g2)("q-space"),_=(0,i.g2)("q-carousel-slide"),E=(0,i.g2)("q-carousel"),A=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(A,{padding:"",style:{display:"flex","justify-content":"center",width:"100%"}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",a,[(0,i.Lk)("div",s,[(0,i.bF)(v,{to:"/",icon:"home",rounded:""}),(0,i.Lk)("div",r,[(0,i.Lk)("span",d,"Week "+(0,o.v_)(e.getISOWeek(e.report.startDate)),1),(0,i.eW)(" - "+(0,o.v_)(e.report.theme)+" - ",1),(0,i.Lk)("span",p,(0,o.v_)(e.getWeekDay(e.slide)),1),(0,i.bF)(k,{modelValue:e.report.theme,"onUpdate:modelValue":t[0]||(t[0]=t=>e.report.theme=t),buttons:""},{default:(0,i.k6)((e=>[(0,i.bF)(b,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:"",onKeyup:(0,l.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue"])]),(0,i.bF)(w),(0,i.bF)(v,{icon:"print",onClick:e.doExport},null,8,["onClick"])]),(0,i.bF)(E,{modelValue:e.slide,"onUpdate:modelValue":t[1]||(t[1]=t=>e.slide=t),"transition-prev":"slide-right","transition-next":"slide-left","control-color":"primary",class:"rounded-borders",arrows:"",style:{width:"100%",height:"100%"},padding:""},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.values(e.report.dayReports),((t,n)=>((0,i.uX)(),(0,i.Wv)(_,{key:n,name:n,style:{width:"100%",height:"100%",display:"flex","flex-direction":"column"}},{default:(0,i.k6)((()=>[(0,i.Lk)("form",c,[(0,i.bF)(b,{modelValue:t.description,"onUpdate:modelValue":e=>t.description=e,type:"textarea",debounce:"300",style:{height:"100%","font-size":"14pt","font-family":"Tahoma, sans-serif","line-height":"1.2"},"input-style":"height: 100%",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Lk)("div",g,[(0,i.Lk)("div",u,[(0,i.Lk)("input",{type:"file",multiple:"",onChange:t=>e.handleFileUpload(n,t),style:{display:"none"},id:`fileInput${n}`,accept:"image/*"},null,40,m),(0,i.bF)(v,{label:"Afbeelding toevoegen",size:"sm",icon:"add",onClick:t=>e.openFileInput(n),disable:t.images.length>=10},null,8,["onClick","disable"])]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.images,((n,o)=>((0,i.uX)(),(0,i.CE)("div",{key:n,style:{width:"200px",height:"200px","flex-grow":"0","flex-shrink":"0",border:"1px solid lightgray",display:"inline-block",position:"relative","box-sizing":"border-box"},class:"q-pa-sm"},[(0,i.bF)(v,{icon:"delete",size:"sm",style:{position:"absolute",top:"3px",right:"3px"},flat:"",round:"",onClick:n=>e.removeImage(t,o)},null,8,["onClick"]),(0,i.Lk)("img",{src:n,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,h)])))),128))])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])),_:1})}var f=n(5182),x=n(8734),v=n(455),b=n(4253),k=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function a(e){try{r(i.next(e))}catch(t){l(t)}}function s(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):o(e.value).then(a,s)}r((i=i.apply(e,t||[])).next())}))};const w=(0,i.pM)({name:"VerslagPage",setup(){const e=(0,v.lq)(),t=(0,f.P)(),n=e.query["reportId"],i=t.get(n);if(void 0===i)throw new Error("Report is not found");return{weekReportStore:t,report:i,slide:(0,x.KR)(0),getISOWeek:b.s}},methods:{getWeekDay(e){const t=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"];return t[e]},openFileInput(e){const t=document.querySelector(`#fileInput${e}`);t&&t.click()},removeImage(e,t){e.images.splice(t,1)},doExport(){return k(this,void 0,void 0,(function*(){const e={theme:this.report.theme,weekNumber:(0,b.s)(this.report.startDate)};for(let n=0;n<5;n++)e["text_day_"+n]=this.paragraphs(this.report.dayReports[n].description).map((e=>`<p>${e}</p>`)),e["img_day_"+n]=this.report.dayReports[n].images.map((e=>`<img src="${e}" />`));let t=n(4249).A;Object.keys(e).forEach((n=>{const i=e[n];t=t.replaceAll(`%${n.toUpperCase()}%`,Array.isArray(i)?i.join(""):i.toString())})),t=`To: Example\nSubject: Verslag week ${(0,b.s)(this.report.startDate)} - ${this.report.theme}\nX-Unsent: 1\nContent-Type: text/html\n\n`+t;var i=new Blob([t],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(i),o.download=`Verslag week ${(0,b.s)(this.report.startDate)} - ${this.report.theme}.eml`,o.hidden=!0,document.body.appendChild(o),o.click()}))},paragraphs(e){return e.trim().replace(/\n\s*\n/g,"\n").split("\n")},handleFileUpload(e,t){return k(this,void 0,void 0,(function*(){const n=t.target.files;if(t.target.type="text",t.target.type="file",!n)return void console.log("no files");const i=this.report.dayReports[e];console.log("update",n);for(let e=0;e<n.length&&i.images.length<20;e++){const t=yield E(n[e],1280,720);null===t&&console.log("Failed",e),i.images.push(yield _(t))}}))}}});function _(e){return new Promise((t=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.readAsDataURL(e)}))}function E(e,t,n){return new Promise(((i,o)=>{let l=new Image;l.src=URL.createObjectURL(e),l.onload=()=>{let o,a,s=l.width,r=l.height;if(s<=t&&r<=n)return void i(e);s>r?(a=r*(t/s),o=t):(o=s*(n/r),a=n);let d=document.createElement("canvas");d.width=o,d.height=a;let p=d.getContext("2d");null!==p?(p.drawImage(l,0,0,o,a),d.toBlob(i,e.type)):i(null)},l.onerror=o}))}var A=n(2807),D=n(3177),C=n(8039),I=n(7426),T=n(7868),V=n(1173),F=n(9923),U=n(8264),j=n(1225),q=n(8582),R=n.n(q);const L=(0,A.A)(w,[["render",y]]),W=L;R()(w,"components",{QPage:D.A,QBtn:C.A,QPopupEdit:I.A,QInput:T.A,QSpace:V.A,QCarousel:F.A,QCarouselSlide:U.A,QField:j.A})},4249:(e,t,n)=>{n.d(t,{A:()=>i});const i='<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      @page {\n        size: 210mm 297mm;\n        margin: 16mm;\n      }\n\n      @media print {\n        .a4-page {\n          width: 100%;\n          margin: unset;\n          min-height: unset;\n          padding: unset;\n        }\n      }\n\n      body {\n        font-family: Tahoma, sans-serif;\n        font-size: 18pt;\n      }\n\n      .day-title:not(:nth-of-type(1)) {\n        page-break-before: always;\n        margin-top: 20cm;\n      }\n\n      .text-box {\n        margin-bottom: 80px;\n      }\n\n      img {\n        height: 13cm;\n        margin-top: 2mm;\n        margin-bottom: 2mm;\n        object-fit: contain;\n      }\n\n      p,\n      img {\n        page-break-inside: avoid;\n        break-inside: avoid;\n      }\n\n      .img-box {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n      }\n\n      body {\n        background-color: lightgray;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n\n      .a4-page {\n        width: 210mm;\n        min-height: 297mm;\n        padding: 0.6in;\n        margin-top: 5px;\n        margin-bottom: 5px;\n        background-color: white;\n      }\n    </style>\n    <title>Week %WEEKNUMBER% - %THEME%</title>\n  </head>\n  <body>\n    <div class="a4-page">\n      <h2>Week %WEEKNUMBER% - %THEME%</h2>\n\n      <div style="height: 10px"></div>\n\n      <h3 class="day-title">Maandag</h3>\n      <div class="text-box">%TEXT_DAY_0%</div>\n      <div class="img-box">%IMG_DAY_0%</div>\n    </div>\n\n    <div class="a4-page">\n      <h3 class="day-title">Dinsdag</h3>\n      <div class="text-box">%TEXT_DAY_1%</div>\n      <div class="img-box">%IMG_DAY_1%</div>\n    </div>\n\n    <div class="a4-page">\n      <h3 class="day-title">Woensdag</h3>\n      <div class="text-box">%TEXT_DAY_2%</div>\n      <div class="img-box">%IMG_DAY_2%</div>\n    </div>\n\n    <div class="a4-page">\n      <h3 class="day-title">Donderdag</h3>\n      <div class="text-box">%TEXT_DAY_3%</div>\n      <div class="img-box">%IMG_DAY_3%</div>\n    </div>\n\n    <div class="a4-page">\n      <h3 class="day-title">Vrijdag</h3>\n      <div class="text-box">%TEXT_DAY_4%</div>\n      <div class="img-box">%IMG_DAY_4%</div>\n    </div>\n  </body>\n</html>\n'}}]);